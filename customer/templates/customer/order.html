{% extends 'customer/base.html' %}
{% load static %}
<style>
    form label {
        font-size: 16px;
        font-weight: 600;
        color: #2c3e50;
        margin-bottom: 5px;
        display: block;
    }

    /* Improve input field visibility */
    form input, form select, form textarea {
        font-size: 15px;
        padding: 10px;
        border: 1px solid #ccc;
        border-radius: 6px;
        width: 100%;
        background-color: #fff;
    }
    .card img {
        width: 100%;
        height: 200px;
        object-fit: cover;
        border-radius: 8px 8px 0 0;
    }
    .card {
        display: flex;
        flex-direction: column;
        height: 100%;
    }
    .card-body {
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }
        .row > .col-md-3 {
        display: flex;
    }

    .row > .col-md-3 .card {
        flex: 1;
    }
</style>
{% block content %}
<div class="container my-5">
    <h1 class="text-center mb-4">Place Your Order</h1>

    <form method="POST">
        {% csrf_token %}

        <!-- Appetizers -->
        <h3><b>Appetizers</b></h3>
        <div class="row">
            {% for item in appetizers %}
            <div class="col-md-3 mb-3">
                <div class="card h-100">
                    {% if item.image %}
    <img src="{{ item.image.url }}" class="card-img-top" alt="{{ item.name }}">
{% endif %}
                    <div class="card-body">
                        <h5 class="card-title">{{ item.name }}</h5>
                        <p class="card-text">₹{{ item.price }}</p>
                        <label>
                            <input type="checkbox" name="items" value="{{ item.pk }}"> Add to order
                        </label>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>

        <!-- Starters -->
        <h3><b>Starters</b></h3>
        <div class="row">
            {% for item in starters %}
            <div class="col-md-3 mb-3">
                <div class="card h-100">
                    {% if item.image %}
    <img src="{{ item.image.url }}" class="card-img-top" alt="{{ item.name }}">
{% endif %}
                    <div class="card-body">
                        <h5 class="card-title">{{ item.name }}</h5>
                        <p class="card-text">₹{{ item.price }}</p>
                        <label>
                            <input type="checkbox" name="items" value="{{ item.pk }}"> Add to order
                        </label>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>

        <!-- Drinks -->
        <h3><b>Drinks</b></h3>
        <div class="row">
            {% for item in drinks %}
            <div class="col-md-3 mb-3">
                <div class="card h-100">
                    {% if item.image %}
    <img src="{{ item.image.url }}" class="card-img-top" alt="{{ item.name }}">
{% endif %}
                    <div class="card-body">
                        <h5 class="card-title">{{ item.name }}</h5>
                        <p class="card-text">₹{{ item.price }}</p>
                        <label>
                            <input type="checkbox" name="items" value="{{ item.pk }}"> Add to order
                        </label>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>

        <!-- Juices -->
        <h3><b>Juices</b></h3>
        <div class="row">
            {% for item in juices %}
            <div class="col-md-3 mb-3">
                <div class="card h-100">
                    {% if item.image %}
    <img src="{{ item.image.url }}" class="card-img-top" alt="{{ item.name }}">
{% endif %}
                    <div class="card-body">
                        <h5 class="card-title">{{ item.name }}</h5>
                        <p class="card-text">₹{{ item.price }}</p>
                        <label>
                            <input type="checkbox" name="items" value="{{ item.pk }}"> Add to order
                        </label>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>

        <!-- Desserts -->
        <h3><b>Desserts</b></h3>
        <div class="row">
            {% for item in desserts %}
            <div class="col-md-3 mb-3">
                <div class="card h-100">
                    {% if item.image %}
        <img src="{{ item.image.url }}" class="card-img-top" alt="{{ item.name }}">
{% endif %}
                    <div class="card-body">
                        <h5 class="card-title">{{ item.name }}</h5>
                        <p class="card-text">₹{{ item.price }}</p>
                        <label>
                            <input type="checkbox" name="items" value="{{ item.pk }}"> Add to order
                        </label>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
         <div class="row">
            <div class="col-md-3 col-sm-12">
            </div>
        </div>

       <div class="form-group pt-3">
            <label for="name"><b>Full Name</b></label>
            <input required class="form-control" type="text" id="name" name="name" placeholder="Your Name" />
       </div>

        <div class="form-group pt-3">
              <label for="email"><b>Email Address</b></label>
              <input required class="form-control" type="email" id="email" name="email" placeholder="example@gmail.com" />
        </div>

        <div class="form-group pt-3">
               <label for="street"><b>Street Address</b></label>
               <input required class="form-control" type="text" id="street" name="street" placeholder="Guntur" />
        </div>


        <div class="row">
            <div class="col-md-5 col-sm-12">
            </div>
        </div>

        <div class="form-group pt-3">
             <label for="city"><b>City</b></label>
             <input required class="form-control" type="text" id="city" name="city" placeholder="Guntur" />
        </div>

        <div class="form-group pt-3">
            <label for="state"><b>State</b></label>
            <input required class="form-control" type="text" id="state" name="state" placeholder="Andhra Pradesh" />
        </div>

        <div class="form-group pt-3">
             <label for="zip"><b>Zip Code</b></label>
             <input required class="form-control" type="text" id="zip" name="zip" placeholder="522034" />
        </div>

        <h4 class="mt-4">Select Payment Method:</h4>
<div class="form-group">
    <div class="form-check">
        <input class="form-check-input" type="radio" name="payment_method" id="cash" value="Cash on Delivery" required>
        <label class="form-check-label" for="cash">Cash on Delivery</label>
    </div>
    <div class="form-check">
        <input class="form-check-input" type="radio" name="payment_method" id="upi" value="UPI">
        <label class="form-check-label" for="upi">UPI</label>
    </div>
    <div class="form-check">
        <input class="form-check-input" type="radio" name="payment_method" id="card" value="Card">
        <label class="form-check-label" for="card">Card</label>
    </div>
</div>

        <!-- ✅ UPI apps section (hidden by default) -->
<div id="upi-apps" class="mt-5" style="display: none;">
    <label>Select UPI App:</label>
    <label>
        <select class="form-control" name="upi_app">
            <option value="Google Pay">Google Pay</option>
            <option value="PhonePe">PhonePe</option>
            <option value="Paytm">Paytm</option>
            <option value="BHIM">BHIM</option>
        </select>
    </label>

    <label class="mt-5">Enter UPI ID:</label>
    <label>
        <input type="text" class="form-control" name="upi_id" placeholder="example@upi">
    </label>
</div>

        <!-- Dummy Payment Sections -->
<div id="dummy-upi" class="mt-5" style="display: none;">
    <h5>Scan UPI QR Code</h5>
    <img src="{% static 'images/qr.jpg' %}" alt="UPI QR Code" style="max-width: 200px;">
    <p class="mt-5">Scan this QR with your UPI app and enter your UPI ID above.</p>
</div>

<div id="dummy-card" class="mt-5" style="display: none;">
    <h5>Enter Card Details (Dummy)</h5>
    <label>
        <input type="text" class="form-control mb-2" placeholder="Card Number (xxxx xxxx xxxx xxxx)">
    </label>
    <label>
        <input type="text" class="form-control mb-2" placeholder="MM/YY">
    </label>
    <label>
        <input type="text" class="form-control mb-2" placeholder="CVV">
    </label>
</div>
        <!-- Button trigger modal -->
       <button type="submit" class="btn btn-dark mt-4">Submit Order</button>

        <!-- <button class="btn btn-dark mt-5">Place Order</button> -->

        <!-- Modal -->
<div class="modal fade" id="submitModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="submitModalLabel">Submit Your Order</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <div class="modal-footer">
        <button type="button" class="btn btn-light" data-dismiss="modal">Go Back</button>
        <button type="submit" class="btn btn-dark">Place Order</button>
      </div>
    </div>
  </div>
</div>
        <h5 class="mt-4">Select Delivery Location on Map</h5>
<div id="map" style="height: 400px; width: 100%;"></div>

<input type="hidden" name="latitude" id="latitude">
<input type="hidden" name="longitude" id="longitude">

    </form>
</div>
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const paymentRadios = document.querySelectorAll("input[name='payment_method']");
        const upiApps = document.getElementById("upi-apps");
        const dummyUPI = document.getElementById("dummy-upi");
        const dummyCard = document.getElementById("dummy-card");

        function togglePaymentSections() {
            const selected = document.querySelector("input[name='payment_method']:checked");
            if (!selected) return;

            if (selected.value === "UPI") {
                upiApps.style.display = "block";
                dummyUPI.style.display = "block";
                dummyCard.style.display = "none";
            } else if (selected.value === "Card") {
                upiApps.style.display = "none";
                dummyUPI.style.display = "none";
                dummyCard.style.display = "block";
            } else {
                upiApps.style.display = "none";
                dummyUPI.style.display = "none";
                dummyCard.style.display = "none";
            }
        }

        paymentRadios.forEach(radio => {
            radio.addEventListener("change", togglePaymentSections);
        });

        togglePaymentSections(); // Run on page load too
    });
</script>
{% endblock %}